<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Thêm Phòng Mới - Hệ thống Khách sạn</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .amenity-checkbox {
        transition: all 0.3s ease;
        border: 1px solid #dee2e6;
        padding: 0.5rem;
      }
      .amenity-checkbox.checked {
        background-color: #e7f1ff;
        border-color: #0d6efd;
      }
      .form-section {
        background: white;
        border-radius: 8px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        border: 1px solid #dee2e6;
      }
      .section-title {
        padding-bottom: 0.75rem;
        margin-bottom: 1.5rem;
        color: #495057;
        font-weight: 600;
      }
      .required::after {
        content: " *";
        color: #dc3545;
      }
    </style>
  </head>
  <body class="bg-light">
    <div class="container py-4">
      <!-- Header -->
      <header
        class="bg-white shadow-sm rounded p-4 mb-4 d-flex justify-content-between align-items-center"
      >
        <h1 class="h3 mb-0 text-dark">Thêm Phòng Mới</h1>
        <a href="/rooms" class="btn btn-secondary"
          ><i class="fas fa-arrow-left me-2"></i>Quay lại danh sách</a
        >
      </header>

      <!-- Add Form -->
      <div class="card shadow-sm border-0">
        <div class="card-body p-4">
          <form id="roomAddForm" action="/rooms" method="POST">
            <!-- Basic Information -->
            <div class="form-section">
              <h3 class="section-title">Thông tin cơ bản</h3>
              <div class="row g-3">
                <div class="col-md-6">
                  <label for="maPhong" class="form-label required"
                    >Mã phòng</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="maPhong"
                    name="maPhong"
                    placeholder="VD: P101"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="tenPhong" class="form-label required"
                    >Tên phòng</label
                  >
                  <input
                    type="text"
                    class="form-control"
                    id="tenPhong"
                    name="tenPhong"
                    placeholder="VD: Deluxury Ocean View"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="loaiPhong" class="form-label required"
                    >Loại phòng</label
                  >
                  <select
                    class="form-select"
                    id="loaiPhong"
                    name="loaiPhong"
                    required
                  >
                    <option value="">Chọn loại phòng</option>
                    <% if(roomTypes && roomTypes.length > 0) {
                    roomTypes.forEach(roomType => { %>
                    <option value="<%= roomType.TenLoaiPhong %>">
                      <%= roomType.TenLoaiPhong %>
                    </option>
                    <% }) } %>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="trangThai" class="form-label required"
                    >Trạng thái</label
                  >
                  <select
                    class="form-select"
                    id="trangThai"
                    name="trangThai"
                    disabled
                  >
                    <option value="Empty" selected>Trống</option>
                  </select>
                </div>
                <div class="col-md-6">
                  <label for="soGiuong" class="form-label required"
                    >Số giường</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="soGiuong"
                    name="soGiuong"
                    min="1"
                    value="1"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="sucChua" class="form-label required"
                    >Sức chứa</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="sucChua"
                    name="sucChua"
                    min="1"
                    value="1"
                    required
                  />
                </div>
                <div class="col-12">
                  <label for="moTa" class="form-label">Mô tả thêm</label>
                  <textarea
                    class="form-control"
                    id="moTa"
                    name="moTa"
                    rows="3"
                    placeholder="Mô tả chi tiết về phòng..."
                  ></textarea>
                </div>
              </div>
            </div>

            <!-- Pricing -->
            <div class="form-section">
              <h3 class="section-title">Thông tin giá</h3>
              <div class="row g-3 mb-4">
                <div class="col-md-6">
                  <label for="giaTheoNgay" class="form-label required"
                    >Giá theo ngày (VNĐ)</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="giaTheoNgay"
                    name="giaTheoNgay"
                    min="0"
                    required
                  />
                </div>
                <div class="col-md-6">
                  <label for="giaTheoGio" class="form-label"
                    >Giá theo giờ (VNĐ)</label
                  >
                  <input
                    type="number"
                    class="form-control"
                    id="giaTheoGio"
                    name="giaTheoGio"
                    min="0"
                  />
                </div>
              </div>
            </div>

            <!-- Amenities -->
            <div class="form-section">
              <h3 class="section-title">Tiện ích phòng</h3>
              <div class="d-flex flex-wrap gap-3">
                <% if(amenities && amenities.length > 0) {
                amenities.forEach(amenity => { %>
                <div class="amenity-checkbox form-check p-2 rounded">
                  <input
                    id="amenity-<%= amenity.MaTienIch %>"
                    class="form-check-input"
                    type="checkbox"
                    name="tienIch"
                    value="<%= amenity.MaTienIch %>"
                  />
                  <label
                    class="form-check-label"
                    for="amenity-<%= amenity.MaTienIch %>"
                  >
                    <i class="fas <%= amenity.IconURL %> me-1 text-primary"></i>
                    <%= amenity.TenTienIch %>
                  </label>
                </div>
                <% }) } %>
              </div>
            </div>

            <!-- Action Buttons -->
            <div class="border-top pt-4 mt-4 d-flex gap-3 justify-content-end">
              <a href="/rooms" class="btn btn-outline-secondary"
                ><i class="fas fa-times me-2"></i>Hủy bỏ</a
              >
              <button type="submit" class="btn btn-primary">
                <i class="fas fa-plus me-2"></i>Thêm phòng
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      // Xử lý checkbox amenities
      document
        .querySelectorAll('.amenity-checkbox input[type="checkbox"]')
        .forEach((checkbox) => {
          checkbox.addEventListener("change", function () {
            const label = this.closest(".amenity-checkbox");
            if (this.checked) label.classList.add("checked");
            else label.classList.remove("checked");
          });
        });
    </script>
  </body>
</html>
